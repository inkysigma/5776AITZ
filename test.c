#pragma config(Sensor, in1,    gyro,           sensorGyro)
#pragma config(Sensor, in3,    LeftLiftPot,    sensorPotentiometer)
#pragma config(Sensor, in4,    RightLiftPot,   sensorPotentiometer)
#pragma config(Sensor, in5,    SwitchLiftPot,  sensorPotentiometer)
#pragma config(Sensor, in7,    MogoRightPot,   sensorPotentiometer)
#pragma config(Sensor, in8,    MogoLeftPot,    sensorPotentiometer)
#pragma config(Sensor, dgtl1,  RightEncoder,   sensorQuadEncoder)
#pragma config(Sensor, dgtl3,  LeftEncoder,    sensorQuadEncoder)
#pragma config(Sensor, dgtl5,  RightLiftEnc,   sensorRotation)
#pragma config(Sensor, dgtl6,  LeftLiftEnc,    sensorRotation)
#pragma config(Sensor, dgtl7,  RightLiftButton, sensorDigitalIn)
#pragma config(Sensor, dgtl8,  LeftLiftButton, sensorDigitalIn)
#pragma config(Motor,  port2,           LeftDrive,     tmotorVex393HighSpeed_MC29, openLoop)
#pragma config(Motor,  port3,           RightDrive,    tmotorVex393HighSpeed_MC29, openLoop)
#pragma config(Motor,  port4,           LeftLift,      tmotorVex393HighSpeed_MC29, openLoop)
#pragma config(Motor,  port5,           RightLift,     tmotorVex393HighSpeed_MC29, openLoop)
#pragma config(Motor,  port6,           LeftMobileGoal, tmotorVex393TurboSpeed_MC29, openLoop)
#pragma config(Motor,  port7,           RightMobileGoal, tmotorVex393HighSpeed_MC29, openLoop)
#pragma config(Motor,  port8,           SwitchLift,    tmotorVex393HighSpeed_MC29, openLoop)
#pragma config(Motor,  port9,           Claw,          tmotorVex393HighSpeed_MC29, openLoop)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

#pragma platform(VEX2)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//
#include "core/motor.h"
#include "ops/motor_ops.h"
#include "ops/build_stack.c"
#include "core/motor.h"
#define LEFT_KP 3
#define LEFT_KI 0
#define LEFT_KD 0
#define LEFT_DT 20

#define RIGHT_KP 3
#define RIGHT_KI 0
#define RIGHT_KD 0
#define RIGHT_DT 20
#include "ops/pid.c"


#define VERBOSE true


task main()
{
	clearDebugStream();
	writeDebugStreamLine("pid {");
	//int cone_level = 1;
	//int target = CONE_POT_HEIGHT * cone_level + CONE_POT_CONST;
	float target = (float) SensorValue[LeftLiftPot];
	pid *leftConfig = initPid(LEFT_KP, LEFT_KI, LEFT_KD, LEFT_DT, LeftLiftPot);
	pid *rightConfig = initPid(RIGHT_KP, RIGHT_KI, LEFT_KD, LEFT_DT, RightLiftPot);
	setTarget(leftConfig, target);
	setTarget(rightConfig, target);
	for (int i = 0; i < 10; i++) {
		writeDebugStreamLine("	target: %f", target);
		if (VERBOSE) writeDebugStreamLine("	pidStep leftConfig {");
		int leftTotal = pidStep(leftConfig);
		if (VERBOSE) {
			writeDebugStreamLine("	}");
			writeDebugStreamLine("	returned %i", leftTotal);
			writeDebugStreamLine("	pidStep rightConfig {");
		}
		int rightTotal = pidStep(rightConfig);
		if (VERBOSE) {
			writeDebugStreamLine("	}");
			writeDebugStreamLine("	returned %i", leftTotal);
		}
		moveLeftLift(leftTotal);
		moveRightLift(rightTotal);
		waitPid(leftConfig);
		waitPid(rightConfig);
	}
	writeDebugStreamLine("}");
}
